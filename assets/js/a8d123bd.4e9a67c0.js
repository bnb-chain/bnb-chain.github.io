"use strict";(self.webpackChunkbeta_BNB_Docs=self.webpackChunkbeta_BNB_Docs||[]).push([[112],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return h}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=d(a),h=r,m=p["".concat(s,".").concat(h)]||p[h]||u[h]||o;return a?n.createElement(m,i(i({ref:t},c),{},{components:a})):n.createElement(m,i({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},16307:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return c},default:function(){return p}});var n=a(87462),r=a(63366),o=(a(67294),a(3905)),i=["components"],l={sidebar_label:"Join Mainnet",sidebar_position:2,hide_table_of_contents:!1},s="How to join BNB Smart Chain Mainnet as Validator?",d={unversionedId:"validator/guideline-mainnet",id:"validator/guideline-mainnet",isDocsHomePage:!1,title:"How to join BNB Smart Chain Mainnet as Validator?",description:"Before You Start",source:"@site/docs/validator/guideline-mainnet.md",sourceDirName:"validator",slug:"/validator/guideline-mainnet",permalink:"/docs/validator/guideline-mainnet",editUrl:"https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/validator/guideline-mainnet.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Join Mainnet",sidebar_position:2,hide_table_of_contents:!1},sidebar:"bscSideBar",previous:{title:"Hardware Requirements",permalink:"/docs/validator/requirements"},next:{title:"Run Validator on Testnet",permalink:"/docs/validator/guideline-testnet"}},c=[{value:"Before You Start",id:"before-you-start",children:[{value:"Choose Your Validator hardware",id:"choose-your-validator-hardware",children:[],level:4}],level:3},{value:"Setting up Validator Node on Mainnet",id:"setting-up-validator-node-on-mainnet",children:[{value:"1. Install BSC Fullnode",id:"1-install-bsc-fullnode",children:[],level:3},{value:"2. Write genesis state locally",id:"2-write-genesis-state-locally",children:[],level:3},{value:"3. Create Consensus Key",id:"3-create-consensus-key",children:[],level:3},{value:"4. Start Validator Node",id:"4-start-validator-node",children:[],level:3},{value:"5. Wait for node to sync",id:"5-wait-for-node-to-sync",children:[],level:3},{value:"6. Setup a data backup (recommended for the mainnet)",id:"6-setup-a-data-backup-recommended-for-the-mainnet",children:[],level:3},{value:"7. Declare Candidacy",id:"7-declare-candidacy",children:[],level:3}],level:2},{value:"After Declaring Your Candidacy",id:"after-declaring-your-candidacy",children:[{value:"1. Monitor node status",id:"1-monitor-node-status",children:[],level:3},{value:"2. Update validator profile",id:"2-update-validator-profile",children:[],level:3},{value:"3. Publish Validator Information",id:"3-publish-validator-information",children:[],level:3},{value:"4. Stop Validating",id:"4-stop-validating",children:[],level:3}],level:2}],u={toc:c};function p(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"how-to-join-bnb-smart-chain-mainnet-as-validator"},"How to join BNB Smart Chain Mainnet as Validator?"),(0,o.kt)("h3",{id:"before-you-start"},"Before You Start"),(0,o.kt)("p",null,"Before you start, make sure you meet the hardware requirements for the validators nodes."),(0,o.kt)("h4",{id:"choose-your-validator-hardware"},"Choose Your Validator hardware"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"VPS running recent versions of Mac OS X or Linux."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"IMPORTANT")," 2T GB of free disk space, solid-state drive(SSD), gp3, 8k IOPS, 250MB/S throughput, read latency <1ms"),(0,o.kt)("li",{parentName:"ul"},"16 cores of CPU and 48 gigabytes of memory (RAM)"),(0,o.kt)("li",{parentName:"ul"},"Suggest m5zn.3xlarge instance type on AWS, or c2-standard-8 on Google cloud."),(0,o.kt)("li",{parentName:"ul"},"A broadband Internet connection with upload/download speeds of 10 megabyte per second")),(0,o.kt)("h2",{id:"setting-up-validator-node-on-mainnet"},"Setting up Validator Node on Mainnet"),(0,o.kt)("h3",{id:"1-install-bsc-fullnode"},"1. Install BSC Fullnode"),(0,o.kt)("p",null,"You can download the pre-build binaries from ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/bnb-chain/bsc/releases/latest"},"release page")," or follow the instructions ",(0,o.kt)("a",{parentName:"p",href:"/docs/validator/fullnode"},"here to set up a full node"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Download the config files")),(0,o.kt)("p",null,"Download ",(0,o.kt)("inlineCode",{parentName:"p"},"genesis.json")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"config.toml")," by:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'## mainet\nwget --no-check-certificate  $(curl -s https://api.github.com/repos/bnb-chain/bsc/releases/latest |grep browser_ |grep mainnet |cut -d\\" -f4)\nunzip mainnet.zip\n')),(0,o.kt)("h3",{id:"2-write-genesis-state-locally"},"2. Write genesis state locally"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"geth --datadir node init genesis.json\n")),(0,o.kt)("p",null,"You could see the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"INFO [05-19|14:53:17.468] Allocated cache and file handles         database=/Users/huangsuyu/Downloads/bsc/node/geth/chaindata cache=16.00MiB handles=16\nINFO [05-19|14:53:17.498] Writing custom genesis block\nINFO [05-19|14:53:17.501] Persisted trie from memory database      nodes=21 size=56.84KiB time=357.915\xb5s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=-574.00B\nINFO [05-19|14:53:17.502] Successfully wrote genesis state         database=chaindata hash=7d79cc\u2026fb0d1e\nINFO [05-19|14:53:17.503] Allocated cache and file handles         database=/Users/huangsuyu/Downloads/bsc/node/geth/lightchaindata cache=16.00MiB handles=16\nINFO [05-19|14:53:17.524] Writing custom genesis block\nINFO [05-19|14:53:17.525] Persisted trie from memory database      nodes=21 size=56.84KiB time=638.396\xb5s gcnodes=0 gcsize=0.00B gctime=0s livenodes=1 livesize=-574.00B\nINFO [05-19|14:53:17.528] Successfully wrote genesis state         database=lightchaindata hash=7d79cc\u2026fb0d1e\n")),(0,o.kt)("h3",{id:"3-create-consensus-key"},"3. Create Consensus Key"),(0,o.kt)("p",null,"You need to create an account that represents a validator's consensus key. Use the following command to create a new account and set a password for that account:"),(0,o.kt)("p",null,"!!! Warning\nPlease do not share access to keystore to others."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"geth account new --datadir ./node\n")),(0,o.kt)("p",null,"This command will return the public address and the path to your private key. BACKUP of keyfile is necessory!"),(0,o.kt)("p",null,"If you already have an account, use the seed phrase to recover it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"geth account import --datadir ./node\n")),(0,o.kt)("h3",{id:"4-start-validator-node"},"4. Start Validator Node"),(0,o.kt)("p",null,"!!! Warning\nPlease do not expose your RPC endpoints to public network."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"## generate the consensus key and input the password\ngeth account new --datadir ./node\necho {your-password} > password.txt\ngeth --config ./config.toml --datadir ./node --syncmode snap -unlock {your-validator-address} --password password.txt  --mine  --allow-insecure-unlock --cache 18000\n")),(0,o.kt)("h3",{id:"5-wait-for-node-to-sync"},"5. Wait for node to sync"),(0,o.kt)("p",null,"Your node should now be catching up with the network by replaying all the transactions from genesis and recreating the blockchain state locally. This will take a long time, so make sure you've set it up on a stable connection so you can leave while it syncs."),(0,o.kt)("p",null,"View the status of the network with ",(0,o.kt)("a",{parentName:"p",href:"https://bscscan.com/"},"https://bscscan.com/"),"."),(0,o.kt)("p",null,"You can monitor the status from log: ",(0,o.kt)("inlineCode",{parentName:"p"},"$HOME/node/bsc.log")," by default."),(0,o.kt)("p",null,"Congratulations! You've now successfully joined a network as a ",(0,o.kt)("a",{parentName:"p",href:"/docs/validator/fullnode"},"full node")," operator."),(0,o.kt)("h3",{id:"6-setup-a-data-backup-recommended-for-the-mainnet"},"6. Setup a data backup (recommended for the mainnet)"),(0,o.kt)("p",null,"If you are connecting to an existing network for which you have a data backup (from a provider you trust), you can optionally load the backup into your node storage rather than syncing from scratch. Learn more ",(0,o.kt)("a",{parentName:"p",href:"/docs/validator/snapshot"},"here")),(0,o.kt)("h3",{id:"7-declare-candidacy"},"7. Declare Candidacy"),(0,o.kt)("p",null,"You can use ",(0,o.kt)("inlineCode",{parentName:"p"},"bnbcli")," binary to sen ",(0,o.kt)("inlineCode",{parentName:"p"},"create-validator")," transaction, thus you can declare your candidacy."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Download ",(0,o.kt)("inlineCode",{parentName:"li"},"bnbcli")," from ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/bnb-chain/node-binary/tree/master/cli/prod/0.8.2"},"GitHub"))),(0,o.kt)("p",null,"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"bnbcli")," to create an account or recover an account, make sure the account get more than 10000 BNB."),(0,o.kt)("p",null,"Make sure your bsc validator have already catched up."),(0,o.kt)("p",null,"Command for create validator on mainnet:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"bnbcli staking bsc-create-validator \\\n-side-cons-addr {validator address} \\\n--side-fee-addr {wallet address on BSC} \\\n--address-delegator {wallet address on BC} \\\n--side-chain-id bsc \\\n--amount 10000000000:BNB \\\n--commission-rate {10000000 represent 10%} \\\n--commission-max-rate {20000000 represent 20%} \\\n--commission-max-change-rate {500000000 represent 5%} \\\n--moniker {validator name} \\\n--details {validator detailed description} \\\n--identity {keybase identity} \\\n--website {website for validator} \\\n--from {key name} \\\n--chain-id Binance-Chain-Tigris \\\n--node https://dataseed5.defibit.io:443\n")),(0,o.kt)("p",null,"Make sure that the ",(0,o.kt)("inlineCode",{parentName:"p"},"side-cons-addr")," is the address you unlock when start the validator node."),(0,o.kt)("p",null,"Read the detailed manual ",(0,o.kt)("a",{parentName:"p",href:"/docs/stake/Staking"},"here")," to understand other parameters."),(0,o.kt)("p",null,"Go to ",(0,o.kt)("a",{parentName:"p",href:"https://explorer.bnbchain.org/"},"explorer")," to verify your transactions."),(0,o.kt)("h2",{id:"after-declaring-your-candidacy"},"After Declaring Your Candidacy"),(0,o.kt)("h3",{id:"1-monitor-node-status"},"1. Monitor node status"),(0,o.kt)("p",null,"To get started quickly, run GethExporter in a Docker container."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'docker run -it -d -p 9090:9090 \\\n  -e "GETH=http://mygethserverhere.com:8545" \\\n  hunterlong/gethexporter\n')),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://grafana.com/api/dashboards/6976/images/4471/image",alt:null})),(0,o.kt)("h3",{id:"2-update-validator-profile"},"2. Update validator profile"),(0,o.kt)("p",null,"You can submit a PullRequest to this repository to update your information: ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/bnb-chain/validator-directory"},"https://github.com/bnb-chain/validator-directory"),"\nReference: ",(0,o.kt)("a",{parentName:"p",href:"https://grafana.com/grafana/dashboards/6976"},"https://grafana.com/grafana/dashboards/6976")),(0,o.kt)("h3",{id:"3-publish-validator-information"},"3. Publish Validator Information"),(0,o.kt)("p",null,"Please submit a Pull Request to this repo ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/bnb-chain/validator-directory"},"https://github.com/bnb-chain/validator-directory")),(0,o.kt)("p",null,"This repository is a place for validator candidates to give potential delegators a brief introduction about your team and infrastructure, and present your ecosystem contributions."),(0,o.kt)("h3",{id:"4-stop-validating"},"4. Stop Validating"),(0,o.kt)("p",null,"You can stop mining new blocks by sending commands in ",(0,o.kt)("inlineCode",{parentName:"p"},"geth console")),(0,o.kt)("p",null,"Connect to your validator node with ",(0,o.kt)("inlineCode",{parentName:"p"},"geth attach ipc:path/to/geth.ipc")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"miner.stop()\n")),(0,o.kt)("p",null,"To resume validating,"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"miner.start()\n")))}p.isMDXComponent=!0}}]);