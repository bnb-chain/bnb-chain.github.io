"use strict";(self.webpackChunkbeta_BNB_Docs=self.webpackChunkbeta_BNB_Docs||[]).push([[9248],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=c(n),u=r,k=m["".concat(p,".").concat(u)]||m[u]||s[u]||i;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},52039:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return d},default:function(){return m}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),o=["components"],l={sidebar_label:"Band Protocol Price Feed on BNB Smart Chain",hide_table_of_contents:!1,sidebar_position:2},p="Band Protocol Price Feed on BNB Smart Chain",c={unversionedId:"band",id:"band",isDocsHomePage:!1,title:"Band Protocol Price Feed on BNB Smart Chain",description:"Introduction",source:"@site/docs/band.md",sourceDirName:".",slug:"/band",permalink:"/docs/band",editUrl:"https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/band.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Band Protocol Price Feed on BNB Smart Chain",hide_table_of_contents:!1,sidebar_position:2},sidebar:"bscSideBar",previous:{title:"BSC Relayer Guides",permalink:"/docs/bsc-relayer"},next:{title:"Chainlink Price Feeds for BSC",permalink:"/docs/link"}},d=[{value:"Introduction",id:"introduction",children:[],level:2},{value:"Supported Tokens",id:"supported-tokens",children:[{value:"Price Pairs",id:"price-pairs",children:[],level:3}],level:2},{value:"Querying Prices",id:"querying-prices",children:[{value:"Solidity Smart Contract",id:"solidity-smart-contract",children:[{value:"Example Usage",id:"example-usage",children:[],level:4},{value:"Contract Addresses",id:"contract-addresses",children:[],level:4}],level:3},{value:"BandChain.JS",id:"bandchainjs",children:[{value:"Example Usage",id:"example-usage-1",children:[],level:4}],level:3}],level:2}],s={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"band-protocol-price-feed-on-bnb-smart-chain"},"Band Protocol Price Feed on BNB Smart Chain"),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"Developers building on BNB Smart Chain can now leverage Band\u2019s decentralized oracle infrastructure. With Band\u2019s oracle, they now have access to various cryptocurrency price data to integrate into their applications."),(0,i.kt)("h2",{id:"supported-tokens"},"Supported Tokens"),(0,i.kt)("p",null,"Currently, the following token symbols are supported. Going forward, this list will continue to expand based on developer needs and community feedback."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"center"},"Token Name"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Symbol"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Binance Coin"),(0,i.kt)("td",{parentName:"tr",align:"center"},"BNB")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Binance USD"),(0,i.kt)("td",{parentName:"tr",align:"center"},"BUSD")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Bitcoin"),(0,i.kt)("td",{parentName:"tr",align:"center"},"BTC")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Ethereum"),(0,i.kt)("td",{parentName:"tr",align:"center"},"ETH")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Tether"),(0,i.kt)("td",{parentName:"tr",align:"center"},"USDT")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"XRP"),(0,i.kt)("td",{parentName:"tr",align:"center"},"XRP")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Chainlink"),(0,i.kt)("td",{parentName:"tr",align:"center"},"LINK")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Polkadot"),(0,i.kt)("td",{parentName:"tr",align:"center"},"DOT")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Bitcoin Cash"),(0,i.kt)("td",{parentName:"tr",align:"center"},"BCH")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Litecoin"),(0,i.kt)("td",{parentName:"tr",align:"center"},"LTC")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Cardano"),(0,i.kt)("td",{parentName:"tr",align:"center"},"ADA")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Bitcoin SV"),(0,i.kt)("td",{parentName:"tr",align:"center"},"BSV")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"http://crypto.com/"},"Crypto.com")," Coin"),(0,i.kt)("td",{parentName:"tr",align:"center"},"CRO")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"EOS"),(0,i.kt)("td",{parentName:"tr",align:"center"},"EOS")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Tezos"),(0,i.kt)("td",{parentName:"tr",align:"center"},"XTZ")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Tron"),(0,i.kt)("td",{parentName:"tr",align:"center"},"TRX")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Stellar"),(0,i.kt)("td",{parentName:"tr",align:"center"},"XLM")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Cosmos"),(0,i.kt)("td",{parentName:"tr",align:"center"},"ATOM")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Monero"),(0,i.kt)("td",{parentName:"tr",align:"center"},"XMR")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"OKB"),(0,i.kt)("td",{parentName:"tr",align:"center"},"OKB")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"center"},"Swipe"),(0,i.kt)("td",{parentName:"tr",align:"center"},"SXP")))),(0,i.kt)("h3",{id:"price-pairs"},"Price Pairs"),(0,i.kt)("p",null,"The method provided below supports price query with any denomination as long as the base and quote symbols are supported in the list above."),(0,i.kt)("p",null,"For example, you can use the APIs in Javascripts and Solidity to query the following price pairs:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"BTC/USD")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"BNB/ETH"))),(0,i.kt)("h2",{id:"querying-prices"},"Querying Prices"),(0,i.kt)("p",null,"Currently, there are two methods for developers to query prices from Band\u2019s oracle: through Band\u2019s ",(0,i.kt)("inlineCode",{parentName:"p"},"StdReference")," smart contract on BNB Smart Chain  and through their ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/%40bandprotocol%2Fbandchain.js"},(0,i.kt)("inlineCode",{parentName:"a"},"bandchain.js"))," JavaScript helper library."),(0,i.kt)("h3",{id:"solidity-smart-contract"},"Solidity Smart Contract"),(0,i.kt)("p",null,"To query prices from Band\u2019s oracle through smart contracts, the contract looking to use the price values should reference Band\u2019s ",(0,i.kt)("inlineCode",{parentName:"p"},"StdReference")," contract. This contract exposes ",(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceData")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceDataBulk")," functions."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceData")," takes two strings as the inputs, the base and quote symbol, respectively. It then queries the ",(0,i.kt)("inlineCode",{parentName:"p"},"StdReference")," contract for the latest rates for those two tokens, and returns a ",(0,i.kt)("inlineCode",{parentName:"p"},"ReferenceData")," struct, shown below."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"struct ReferenceData {\n    uint256 rate; // base/quote exchange rate, multiplied by 1e18.\n    uint256 lastUpdatedBase; // UNIX epoch of the last time when base price gets updated.\n    uint256 lastUpdatedQuote; // UNIX epoch of the last time when quote price gets updated.\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceDataBulk")," instead takes two lists, one of the ",(0,i.kt)("inlineCode",{parentName:"p"},"base")," tokens, and one of the ",(0,i.kt)("inlineCode",{parentName:"p"},"quotes"),". It then proceeds to similarly queries the price for each base/quote pair at each index, and returns an array of ",(0,i.kt)("inlineCode",{parentName:"p"},"ReferenceData")," structs."),(0,i.kt)("p",null,"For example, if we call ",(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceDataBulk")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"['BTC','BTC','ETH']")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"['USD','ETH','BNB']"),", the returned ",(0,i.kt)("inlineCode",{parentName:"p"},"ReferenceData")," array will contain information regarding the pairs:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"BTC/USD")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"BTC/ETH")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ETH/BNB"))),(0,i.kt)("h4",{id:"example-usage"},"Example Usage"),(0,i.kt)("p",null,"The contract code below demonstrates a simple usage of the new ",(0,i.kt)("inlineCode",{parentName:"p"},"StdReference")," contract and the ",(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceData")," function."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'pragma solidity 0.6.11;\npragma experimental ABIEncoderV2;\n\ninterface IStdReference {\n    /// A structure returned whenever someone requests for standard reference data.\n    struct ReferenceData {\n        uint256 rate; // base/quote exchange rate, multiplied by 1e18.\n        uint256 lastUpdatedBase; // UNIX epoch of the last time when base price gets updated.\n        uint256 lastUpdatedQuote; // UNIX epoch of the last time when quote price gets updated.\n    }\n\n    /// Returns the price data for the given base/quote pair. Revert if not available.\n    function getReferenceData(string memory _base, string memory _quote)\n        external\n        view\n        returns (ReferenceData memory);\n\n    /// Similar to getReferenceData, but with multiple base/quote pairs at once.\n    function getReferenceDataBulk(string[] memory _bases, string[] memory _quotes)\n        external\n        view\n        returns (ReferenceData[] memory);\n}\n\ncontract DemoOracle {\n    IStdReference ref;\n    \n    uint256 public price;\n    \n    constructor(IStdReference _ref) public {\n        ref = _ref;\n    }\n    \n    function getPrice() external view returns (uint256){\n        IStdReference.ReferenceData memory data = ref.getReferenceData("BTC","USD");\n        return data.rate;\n    }\n    \n    function getMultiPrices() external view returns (uint256[] memory){\n        string[] memory baseSymbols = new string[](2);\n        baseSymbols[0] = "BTC";\n        baseSymbols[1] = "ETH";\n         \n        string[] memory quoteSymbols = new string[](2);\n        quoteSymbols[0] = "USD";\n        quoteSymbols[1] = "USD";\n        IStdReference.ReferenceData[] memory data = ref.getReferenceDataBulk(baseSymbols,quoteSymbols);\n        \n        uint256[] memory prices = new uint256[](2);\n        prices[0] = data[0].rate;\n        prices[1] = data[1].rate;\n        \n        return prices;\n    }\n    \n    function savePrice(string memory base, string memory quote) external {\n        IStdReference.ReferenceData memory data = ref.getReferenceData(base,quote);\n        price = data.rate;\n    }\n}\n')),(0,i.kt)("h4",{id:"contract-addresses"},"Contract Addresses"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Blockchain"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Aggregator Contract Address"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Update Every"),(0,i.kt)("th",{parentName:"tr",align:"center"},"Explorer"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"BSC (Testnet)"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"0xDA7a001b254CD22e46d3eAB04d937489c93174C3")),(0,i.kt)("td",{parentName:"tr",align:"center"},"5 mins"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"https://testnet.bscscan.com/address/0xDA7a001b254CD22e46d3eAB04d937489c93174C3"},"link"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"BSC (Mainnet)"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("inlineCode",{parentName:"td"},"0xDA7a001b254CD22e46d3eAB04d937489c93174C3")),(0,i.kt)("td",{parentName:"tr",align:"center"},"5 mins"),(0,i.kt)("td",{parentName:"tr",align:"center"},(0,i.kt)("a",{parentName:"td",href:"https://bscscan.com/address/0xDA7a001b254CD22e46d3eAB04d937489c93174C3"},"link"))))),(0,i.kt)("h3",{id:"bandchainjs"},"BandChain.JS"),(0,i.kt)("p",null,"Band\u2019s node helper library ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@bandprotocol/bandchain.js"},(0,i.kt)("inlineCode",{parentName:"a"},"bandchain.js"))," also supports a similar ",(0,i.kt)("inlineCode",{parentName:"p"},"getReferenceData")," function. This function takes one argument, a list of token pairs to query the result of. It then returns a list of corresponding rate values."),(0,i.kt)("h4",{id:"example-usage-1"},"Example Usage"),(0,i.kt)("p",null,"The code below shows an example usage of the function"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"const BandChain = require('@bandprotocol/bandchain.js');\n\n(async () => {\n  const endpoint = 'https://poa-api.bandchain.org';\n\n  const bandchain = new BandChain(endpoint);\n  const price = await bandchain.getReferenceData(['BAND/USD', 'BTC/ETH', 'EUR/USD', 'EUR/BTC']);\n  console.log(price);\n})();\n")),(0,i.kt)("p",null,"The corresponding result will then be similar to"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"$ node index.js\n[\n  {\n    pair: 'BAND/USD',\n    rate: 6.49,\n    updated: { base: 1600676205, quote: 0 },\n    rawRate: { value: 6490000000n, decimals: 9 }\n  },\n  {\n    pair: 'BTC/ETH',\n    rate: 29.574702955490906,\n    updated: { base: 1600676187, quote: 1600676187 },\n    rawRate: { value: 29574702955n, decimals: 9 }\n  },\n  {\n    pair: 'EUR/USD',\n    rate: 1.185569204,\n    updated: { base: 1600676032, quote: 0 },\n    rawRate: { value: 1185569204n, decimals: 9 }\n  },\n  {\n    pair: 'EUR/BTC',\n    rate: 0.00010899500647220628,\n    updated: { base: 1600676032, quote: 1600676187 },\n    rawRate: { value: 108995n, decimals: 9 }\n  }\n]\n")),(0,i.kt)("p",null,"For each pair, the following information will be returned:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"pair"),": The base/quote symbol pair string")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"rate"),": The resulting rate of the given pair")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"updated"),": The timestamp at which the base and quote symbols was last updated on BandChain. For ",(0,i.kt)("inlineCode",{parentName:"p"},"USD"),", this will be the current timestamp")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"rawRate"),": This object consists of two parts."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value")," is the ",(0,i.kt)("inlineCode",{parentName:"li"},"BigInt")," value of the actual rate, multiplied by ",(0,i.kt)("inlineCode",{parentName:"li"},"10^decimals")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"decimals")," is then the exponent by which ",(0,i.kt)("inlineCode",{parentName:"li"},"rate")," was multiplied by to get ",(0,i.kt)("inlineCode",{parentName:"li"},"rawRate"))))),(0,i.kt)("p",null,"Originally published ",(0,i.kt)("a",{parentName:"p",href:"https://hackmd.io/@tansawit/bsc-developer-docs-standard-dataset#"},"here")))}m.isMDXComponent=!0}}]);