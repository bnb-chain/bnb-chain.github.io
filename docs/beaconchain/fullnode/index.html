<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BNB Chain Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BNB Chain Documentation Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="BNB Chain Documentation" href="/opensearch.xml"><title data-react-helmet="true">Run Full Node to Join Beacon Chain | BNB Chain Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://bnb-chain.github.io//docs/beaconchain/fullnode"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Run Full Node to Join Beacon Chain | BNB Chain Documentation"><meta data-react-helmet="true" name="description" content="A full node of Beacon Chain  is a witness, which observes the consensus messaging, downloads blocks from data seed nodes and executes business logic to achieve the consistent state as validator node (and other full node). Full nodes also help the network by accepting transactions from other nodes and then relaying them to the core Binance network."><meta data-react-helmet="true" property="og:description" content="A full node of Beacon Chain  is a witness, which observes the consensus messaging, downloads blocks from data seed nodes and executes business logic to achieve the consistent state as validator node (and other full node). Full nodes also help the network by accepting transactions from other nodes and then relaying them to the core Binance network."><link data-react-helmet="true" rel="shortcut icon" href="/img/icon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://bnb-chain.github.io//docs/beaconchain/fullnode"><link data-react-helmet="true" rel="alternate" href="https://bnb-chain.github.io//docs/beaconchain/fullnode" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://bnb-chain.github.io//docs/beaconchain/fullnode" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://3LF005YNGZ-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2cd9bd19.css">
<link rel="preload" href="/assets/js/runtime~main.5985d00f.js" as="script">
<link rel="preload" href="/assets/js/main.1ec6f309.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/image.png" alt="BNB" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/image.png" alt="BNB" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">BNB Chain Documentation</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Run Full Node to Join Beacon Chain</h1></header><p>A <code>full node</code> of Beacon Chain  is a <code>witness</code>, which observes the consensus messaging, downloads blocks from <code>data seed nodes</code> and executes business logic to achieve the consistent state as <code>validator node</code> (and other <code>full node</code>). Full nodes also help the network by accepting transactions from other nodes and then relaying them to the core Binance network.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="supported-platforms">Supported Platforms<a aria-hidden="true" class="hash-link" href="#supported-platforms" title="Direct link to heading">â€‹</a></h2><p>We support running a full node on <code>Mac OS X</code>, <code>Windows</code> and <code>Linux</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="minimum-system-requirements">Minimum System Requirements<a aria-hidden="true" class="hash-link" href="#minimum-system-requirements" title="Direct link to heading">â€‹</a></h2><p>The hardware must meet certain requirements to run a full node.</p><ul><li>Desktop or laptop hardware running recent versions of Mac OS X, Windows, or Linux.</li><li>500 GB of free disk space, accessible at a minimum read/write speed of 100 MB/s.</li><li>4 cores of CPU and 8 gigabytes of memory (RAM).</li><li>A broadband Internet connection with upload/download speeds of at least 1 megabyte per second</li><li>Your full node has to run at least 4 hours per 24 hours in order to catch up with Beacon Chain
More hours will be better, run your node continuously for best results.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="steps-to-run-a-full-node">Steps to Run a Full Node<a aria-hidden="true" class="hash-link" href="#steps-to-run-a-full-node" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="option-one-installation-script">Option One: Installation Script<a aria-hidden="true" class="hash-link" href="#option-one-installation-script" title="Direct link to heading">â€‹</a></h3><p>We have a community-maintained installer script (<code>install.sh</code>) that takes care of chain directory setup. This uses the following defaults:</p><ul><li>Home folder in <code>~/.bnbchaind</code></li><li>Client executables stored in <code>/usr/local/bin</code> (i.e. <code>light</code> or <code>bnbchaind</code>)</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># One-line install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sh</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> -qO- https://raw.githubusercontent.com/binance-chain/node-binary/master/install.sh</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="option-two-manual-installation">Option Two: Manual Installation<a aria-hidden="true" class="hash-link" href="#option-two-manual-installation" title="Direct link to heading">â€‹</a></h3><p>We currently use this repo to store historical versions of the compiled <code>node-binaries</code>.</p><ol><li>Install Git LFS</li></ol><p>Git Large File Storage (LFS) replaces large files such as audio samples, videos, datasets, and graphics with text pointers inside Git, while storing the file contents on a remote server like GitHub.com or GitHub Enterprise.</p><p>Please go to <a href="https://git-lfs.github.com/" target="_blank" rel="noopener noreferrer">https://git-lfs.github.com/</a> and install <code>git lfs</code>.</p><ol start="2"><li>Download Binary with Git LFS:</li></ol><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> lfs clone https://github.com/bnb-chain/node-binary.git</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Please go to <a href="https://github.com/bnb-chain/node-binary/blob/master/fullnode/Changelog.md" target="_blank" rel="noopener noreferrer">changelog</a> to get the information about the latest release of full node version.</p><p>Go to directory according to the network you want to join in.<br>
Replace the <code>network</code> variable with <code>testnet</code> or <code>prod</code> in the following command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> node-binary/fullnode/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">network</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">version</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol><li>Copy the executables (i.e.<code>bnbchaind</code> or <code>bnbcli</code>) to <code>/usr/local/bin</code></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="initialize-home-folder">Initialize Home Folder<a aria-hidden="true" class="hash-link" href="#initialize-home-folder" title="Direct link to heading">â€‹</a></h3><p>First you need to choose a home folder <code>$BNCHOME</code> (i.e. ~/.bnbchaind) for Beacon Chain .<br>
You can setup this by:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/.bnbchaind</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/.bnbchaind/config</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="setup-configuration">Setup Configuration<a aria-hidden="true" class="hash-link" href="#setup-configuration" title="Direct link to heading">â€‹</a></h3><p>Put <code>app.toml</code>, <code>config.toml</code> and <code>genesis.json</code> from <code>node-binary/fullnode/{network}/{version}/config/</code> into <code>$BNCHOME/config</code></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-seed-nodes">Add Seed Nodes<a aria-hidden="true" class="hash-link" href="#add-seed-nodes" title="Direct link to heading">â€‹</a></h3><p>For a full node to function, it must connect to one or more known nodes to join Beacon Chain .<br>
There are several famous <code>seed nodes</code> that offer known node addresses in the network to newly joined full nodes.<br>
They are already in <code>node-binary/fullnode/{network}/{version}/config/config.toml</code> file.</p><p>You cat also get seeds info through a simple python script (replace domain name depending on which network you are using):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> requests</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://dex.binance.org/api/v1/peers&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">text </span><span class="token comment" style="color:#999988;font-style:italic"># replace dex.binance.org with testnet-dex.binance.org for testnet</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">seeds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;,&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seed</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;@&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">seed</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;original_listen_addr&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> seed </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> l </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> seed</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;accelerated&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seeds</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you want to add seed nodes, please feel free to edit the field <code>seeds</code> of <code>$BNCHOME/config/config.yaml</code> with returned seed node info from previous request.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="config-syncing">Config Syncing<a aria-hidden="true" class="hash-link" href="#config-syncing" title="Direct link to heading">â€‹</a></h3><p>Beacon Chain  is making blocks at a very fast pace and its block height is over 60 million. As a result, it will take a long time to <strong><a href="#fast-sync">fast-sync</a></strong> (download all the blocks from genesis block). To decrease the waiting time, an innovative way of syncing a fullnode is introduced and it&#x27;s called <strong><a href="#state-sync">state-sync</a></strong>. <strong>State Sync</strong> is the default way of syncing in the published config files. If you need to switch to <strong>Fast Sync</strong>, you need to change the <code>config.toml</code> accordingly. You can read more in the following sections.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="additional-configuration">Additional Configuration<a aria-hidden="true" class="hash-link" href="#additional-configuration" title="Direct link to heading">â€‹</a></h4><ul><li>Log: The log file is under <code>home</code>- the directory specified when starting <code>bnbchaind</code>.<br>
The latest log file is <code>bnc.log</code>. The process will create a new log file every one hour.<br>
To make sure you have sufficient disk space to keep the log files, we strongly recommend you to change the log location by changing <code>logFileRoot</code> option in <code>$BNCHOME/config/app.toml</code>.<br></li><li>Service Port: RPC service listens on port <code>27147</code> and P2P service listens on port <code>27146</code> by default.<br>
Make sure these two ports are open before starting a full node, unless the full node has to listen on other ports.</li><li>Store: All the state and block data will store under <code>$BNCHOME/data</code>, do not delete or edit any of these files.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="start-your-node">Start your node<a aria-hidden="true" class="hash-link" href="#start-your-node" title="Direct link to heading">â€‹</a></h3><p>Start the full node according to the place of your executables.<br></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">bnbchaind start --home </span><span class="token variable" style="color:#36acaa">$BNCHOME</span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Only after catching up with Beacon Chain , the fullnode can handle requests correctly.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="details-on-sync-mode">Details on Sync Mode<a aria-hidden="true" class="hash-link" href="#details-on-sync-mode" title="Direct link to heading">â€‹</a></h4><p>There are three ways for you to get synced with other peers in blockchain network:</p><ul><li>Fast Sync</li><li>State Sync</li><li>Hot Sync</li></ul><p>These methods can be used together.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="fast-sync">Fast Sync<a aria-hidden="true" class="hash-link" href="#fast-sync" title="Direct link to heading">â€‹</a></h5><p>The default way for syncing with other data seed node is fast sync.<br>
In fast sync, you need to download all the blocks from the genesis block and execute all the transaction in every block until it is synced with its peers.<br>
The sync speed is about 20 blocks/s, which is slower than state sync.</p><p>Configuration is located in <code>$BNCHOME/config/config.toml</code>:</p><ul><li><code>fast_sync</code> Must be set to <code>true</code></li><li><code>state_sync_reactor</code> Can be set to <code>false</code> or <code>true</code></li><li><code>state_sync</code> Can be set to <code>false</code> or <code>true</code></li><li><code>state_sync_height</code> should be less than 0, like <code>-1</code></li></ul><h5 class="anchor anchorWithStickyNavbar_y2LR" id="state-sync">State Sync<a aria-hidden="true" class="hash-link" href="#state-sync" title="Direct link to heading">â€‹</a></h5><p>As explained in <a href="https://github.com/bnb-chain/BEPs/blob/master/BEP18.md" target="_blank" rel="noopener noreferrer">BEP18</a>, State sync will get the application state of your full node to be up to date without downloading all of the blocks.The sync speed is faster than fast sync.<br>
Now you do not need to allocate more memories to your full node for this feature to work.</p><p>Configuration is located in <code>$BNCHOME/config/config.toml</code>:</p><ul><li><code>state_sync_reactor</code> Must be set to <code>true</code></li><li><code>recv_rate</code> Must set to <code>102428800</code></li><li><code>ping_interval</code> Recommendation is set to <code>10m30s</code></li><li><code>pong_timeout</code> Recommendation is set to <code>450s</code></li><li><code>state_sync_height</code> Recommendation is set to <code>0</code>, so it allows to state sync from the peers&#x27;s latest height. Please do not change the height to other number, unless you are doing some debug.</li></ul><p>State sync can help fullnode in same status with other peers within short time (according to our test, a one month ~800M DB snapshot in Beacon Chain  testnet can be synced in around 45 minutes) so that you can receive latest blocks/transactions and query latest status of orderbook, account balances etc.. But state sync DOES NOT download historical blocks before state sync height, if you start your node with state sync and it synced at height 10000, then your local database would only have blocks after height 10000.</p><p>If full node has already started, suggested way is to delete the (after backup) <code>$BNCHOME/data</code> directory and <code>$BNCHOME/config/priv_validator_key.json</code> before enabling state sync.</p><p>State sync will run only once after you start your full node. Once state sync succeeds, later fullnode restart would not state sync anymore. But if you do want state sync again, you need to delete <code>$BNCHOME/data/STATESYNC.LOCK</code>.</p><p>If you turn on the <code>state_sync_reactor</code>, the snapshots of heights will be saved at <code>$HOME/data/snapshot/&lt;height&gt;</code> automatically. To save disk space, you can delete the directory or turn off the  <code>state_sync_reactor</code>.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="hot-sync">Hot Sync<a aria-hidden="true" class="hash-link" href="#hot-sync" title="Direct link to heading">â€‹</a></h5><blockquote><p>Please note that this feature is still expreimental and is not recommended.</p></blockquote><p>In Beacon Chain  network, almost every fullnode operator will first enable <code>state-sync</code> to get synced with peers. After downloading all the state machine changes, the fullnode will go back to <code>fast-sync</code> mode and eventually in <code>consensus</code> mode.  In fast-sync mode, the fullnode will have high delay because it needs to be aware of peersâ€™ heights. It downloads all the blocks in parallel and verifying their commits. On the other hand, when a fullnode is under <code>consensus</code> state, it will consume a lot of bandwidth and CPU resources because it receives a lot of redundant messages for consensus engine and writes more WAL.
To increase the efficiency for fullnodes, the <code>hot-sync</code> protocol is introduced. A fullnode under <code>hot-sync</code> protocol will pull the blocks from its peers and it will subscribe these blocks in advance. It will skip the message for prevotes and only subscribe to maj23 precommit and block proposal messages. At the same time, it will put its peers in different buckets and subscribe to peers in active buckets. <code>Hot-Sync</code> can help fullnodes gossip blocks in low latency, while cost less network, memory, cpu and disk resources than Tendermint consensus protocol. Even cheap hardware can easily run a fullnode, and a  fullnode can connect with more peers than before by saving network and CPU resources.</p><p>The state transition of a hot sync reactor can be of three part:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">                              Hot --&gt; Consensus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 ^    ^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 |   /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 |  /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                Mute</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol><li><code>Mute</code>: will only answer subscribe requests from others, will not sync from others or from consensus reactor. The Hot Sync reactor stays in <code>Mute</code> when it is fast syncing.</li><li><code>Hot</code>:  handle subscribe requests from other peers as a publisher, also subscribe block messages from other peers as a subscriber. A non-validators will stay in <code>Hot</code> when the peer have catch up after fast syncing.</li><li><code>Consensus</code>: handle subscribes requests from other peers as a publisher, but get block/commit message from consensus reactor. A sentry node should stay in <code>Consensus</code>. Or a non-validator should switch from <code>Hot</code> to <code>Consensus</code> when it become a validator.</li></ol><p>Configuration is located in <code>$BNCHOME/config/config.toml</code>:</p><ul><li><code>hot_sync_reactor</code> Must be set to <code>true</code></li><li><code>hot_sync</code> Can be set to <code>false</code> or <code>true</code></li><li><code>hot_sync_timeout</code> is the max wait time for subscribe a block. It only takes effect when hot_sync is true</li></ul><h5 class="anchor anchorWithStickyNavbar_y2LR" id="monitor-syncing-process">Monitor Syncing Process<a aria-hidden="true" class="hash-link" href="#monitor-syncing-process" title="Direct link to heading">â€‹</a></h5><p>You can verify if state sync is done by <code>curl localhost:27147/status</code> several times and see whether <code>latest_block_height</code> is increasing in response.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;sync_info&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latest_block_height&quot;: &quot;878092&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;latest_block_time&quot;: &quot;2019-04-15T00:01:22.610803768Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If state sync did not succeed, please repeat deletion of <code>$BNCHOME/data</code> directory and <code>$BNCHOME/config/priv_validator_key.json</code> before starting full node next time in case of data inconsistency.</p><p>Once state sync succeeded, later full node restart would not state sync anymore (in case the local blocks are not continuous).<br>
But if you do want state sync again (don&#x27;t care that there are missing blocks between last stop and latest state sync snapshot) and you want to keep already synced blocks, you can just delete <code>$BNCHOME/data/STATESYNC.LOCK</code>.</p><p>For example, you start your full node at Jan 1st with state sync at height 10000 and after a while you shut it down at height 22000 on Feb 10th.<br>
Now its Mar 1st, latest sync-able block height is 50000, you don&#x27;t care blocks between 22000 and 50000, you can delete <code>$BNCHOME/data/STATESYNC.LOCK</code> before start your node.<br>
Then the full node would continue state sync from height 50000.</p><p>Turning off <code>state_sync_reactor</code> and <code>state_sync</code> can save your memory after you successfully state synced.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="upgrading-full-node">Upgrading Full Node<a aria-hidden="true" class="hash-link" href="#upgrading-full-node" title="Direct link to heading">â€‹</a></h2><p>In most cases, download the new binary and replace it, then restart the full node.<br>
In special cases, you may have to do extra steps for an incompatible version (hard fork).</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="monitoring">Monitoring<a aria-hidden="true" class="hash-link" href="#monitoring" title="Direct link to heading">â€‹</a></h2><p>Prometheus is enabled on port <code>28660</code> by default, and the endpoint is <code>/metrics</code>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="get-extra-data-from-your-full-node">Get Extra Data From Your Full Node<a aria-hidden="true" class="hash-link" href="#get-extra-data-from-your-full-node" title="Direct link to heading">â€‹</a></h2><p>Full node has the same RPC interface as the one listed here <a href="/docs/api-reference/node-rpc">rpc-api</a></p><p>If you want to get extra information about order book, balance changes or block fee changes from blocks, please refer to <a href="/docs/beaconchain/get-extra-data-from-fullnode">getting extra data from fullnode</a>.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="common-issues-and-solutions">Common Issues and Solutions<a aria-hidden="true" class="hash-link" href="#common-issues-and-solutions" title="Direct link to heading">â€‹</a></h2><p>Please refer to this <a href="/docs/beaconchain/fullnodeissue">doc</a> to find answers to common issues.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/bnb-chain/bnb-chain.github.io/blob/master/docs/beaconchain/fullnode.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#supported-platforms" class="table-of-contents__link toc-highlight">Supported Platforms</a></li><li><a href="#minimum-system-requirements" class="table-of-contents__link toc-highlight">Minimum System Requirements</a></li><li><a href="#steps-to-run-a-full-node" class="table-of-contents__link toc-highlight">Steps to Run a Full Node</a><ul><li><a href="#option-one-installation-script" class="table-of-contents__link toc-highlight">Option One: Installation Script</a></li><li><a href="#option-two-manual-installation" class="table-of-contents__link toc-highlight">Option Two: Manual Installation</a></li><li><a href="#initialize-home-folder" class="table-of-contents__link toc-highlight">Initialize Home Folder</a></li><li><a href="#setup-configuration" class="table-of-contents__link toc-highlight">Setup Configuration</a></li><li><a href="#add-seed-nodes" class="table-of-contents__link toc-highlight">Add Seed Nodes</a></li><li><a href="#config-syncing" class="table-of-contents__link toc-highlight">Config Syncing</a></li><li><a href="#start-your-node" class="table-of-contents__link toc-highlight">Start your node</a></li></ul></li><li><a href="#upgrading-full-node" class="table-of-contents__link toc-highlight">Upgrading Full Node</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">Monitoring</a></li><li><a href="#get-extra-data-from-your-full-node" class="table-of-contents__link toc-highlight">Get Extra Data From Your Full Node</a></li><li><a href="#common-issues-and-solutions" class="table-of-contents__link toc-highlight">Common Issues and Solutions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/bnbIntro">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buildnbuild.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>BuildnBuild Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.bnbchain.org/en/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/bnb-chain" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.com/invite/bnbchain" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/BNBCHAIN" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="http://t.me/BinanceDEXchange" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Build N Build.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5985d00f.js"></script>
<script src="/assets/js/main.1ec6f309.js"></script>
</body>
</html>